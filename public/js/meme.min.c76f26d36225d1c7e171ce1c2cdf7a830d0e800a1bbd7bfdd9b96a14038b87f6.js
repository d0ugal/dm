const throttle=(t,n)=>{let s,o,e;return function(){const i=this,a=arguments;s?(clearTimeout(o),o=setTimeout(function(){Date.now()-e>=n&&(t.apply(i,a),e=Date.now())},Math.max(n-(Date.now()-e),0))):(t.apply(i,a),e=Date.now(),s=!0)}},delayTime=420;window.addEventListener("DOMContentLoaded",t=>{const e=document.querySelector(".header");if(e){const t=window.getComputedStyle(e,null).getPropertyValue("height");document.documentElement.style.setProperty("--header-height",t)}},{once:!0}),window.addEventListener("DOMContentLoaded",l=>{const t=document.querySelector(".nav-toggle"),s=document.createElement("div");s.className="nav-toggle-inner",t.appendChild(s);for(let e=0;e<3;e++){const t=document.createElement("span");s.appendChild(t)}const n=document.getElementById("nav-toggle"),e=document.querySelector(".header"),o=document.querySelector(".nav-curtain");n.addEventListener("change",n=>{n.target.checked?(e.classList.add("open"),t.classList.add("open"),e.classList.remove("fade"),o.style="display: block"):(e.classList.remove("open"),t.classList.remove("open"),e.classList.add("fade"))}),o.addEventListener("animationend",e=>{n.checked||e.target.removeAttribute("style")}),window.addEventListener("scroll",throttle(function(){c()},delayTime));const a=window.getComputedStyle(document.documentElement,null).getPropertyValue("--max-width");let r=window.matchMedia(`(max-width: ${a})`);r.addListener(e=>{e.matches||i(!0)});function c(){const e=document.getElementById("search-input");if(e&&e===document.activeElement)return;i()}function i(s){n.checked&&(n.checked=!1,e.classList.remove("open"),t.classList.remove("open"),s?o.removeAttribute("style"):e.classList.add("fade"))}},{once:!0}),window.addEventListener("DOMContentLoaded",t=>{const e=document.getElementById("back-to-top");e!==null&&window.addEventListener("scroll",throttle(function(){window.scrollY>100?e.classList.add("show"):e.classList.remove("show")},delayTime))},{once:!0});const userPrefers=localStorage.getItem("theme");userPrefers==="dark"?changeModeMeta("dark"):userPrefers==="light"&&changeModeMeta("light"),window.matchMedia("(prefers-color-scheme: dark)").addListener(e=>{changeMode()}),window.addEventListener("DOMContentLoaded",t=>{changeMode();const e=document.getElementById("theme-switcher");e&&e.addEventListener("click",e=>{e.preventDefault(),getCurrentTheme()=="dark"?changeModeMeta("light"):changeModeMeta("dark"),changeMode(),storePrefers()})},{once:!0}),window.addEventListener("storage",function(e){if(e.key!=="theme")return;e.newValue==="dark"?changeModeMeta("dark"):changeModeMeta("light"),changeMode()});function getCurrentTheme(){return JSON.parse(window.getComputedStyle(document.documentElement,null).getPropertyValue("--theme-name"))}function changeModeMeta(e){document.documentElement.setAttribute("data-theme",e)}function changeMode(){const e=getCurrentTheme()==="dark",t=e?"#16171d":"#fff";if(document.querySelector('meta[name="theme-color"]').setAttribute("content",t),typeof mermaidConfig!="undefined"){const t=document.querySelectorAll(".mermaid");t.forEach(e=>{e.getAttribute("data-processed")?(e.removeAttribute("data-processed"),e.innerHTML=e.getAttribute("data-graph")):e.setAttribute("data-graph",e.textContent)}),e?(mermaidConfig.theme="dark",mermaid.initialize(mermaidConfig),mermaid.init()):(mermaidConfig.theme="default",mermaid.initialize(mermaidConfig),mermaid.init())}}function storePrefers(){window.localStorage.setItem("theme",getCurrentTheme())}window.addEventListener("DOMContentLoaded",s=>{const e="Copy",n="Copied!";document.querySelectorAll(".post-body > pre").forEach(e=>{let t=document.createElement("div");e.parentNode.replaceChild(t,e),t.appendChild(e)});function t(t){const s=document.querySelectorAll("table.lntable, .highlight > pre, .post-body > div > pre");s.forEach(o=>{o.parentNode.style.position="relative";const s=document.createElement("button");if(s.className="copy-button",s.type="button",s.innerText=e,o.classList.contains("lntable"))var i=o.querySelectorAll(".lntd")[1];else i=o.querySelector("code");s.addEventListener("click",()=>{t.writeText(i.innerText).then(()=>{s.blur(),s.innerText=n,setTimeout(()=>{s.innerText=e},1e3)}).catch(e=>{s.innerText="Error",console.error(e)})}),o.appendChild(s),o.parentNode.addEventListener("mouseover",()=>{s.style="visibility: visible; opacity: 1"}),o.parentNode.addEventListener("mouseout",()=>{s.style="visibility: hidden; opacity: 0"})})}if(navigator&&navigator.clipboard)t(navigator.clipboard);else{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js",e.defer=!0,e.onload=function(){t(clipboard)},document.head.appendChild(e)}},{once:!0}),window.addEventListener("DOMContentLoaded",h=>{let o=null,i=null,e=null,n=!1,t=null;const s=document.getElementById("search"),a=document.getElementById("search-input");s.addEventListener("submit",function(t){t.preventDefault();let e=a.value.trim();if(!e)return;r(e,!1)},!1),history.state&&history.state.type=="search"&&r(history.state.term,!0),window.addEventListener("popstate",function(e){if(e.state&&e.state.type=="search")r(e.state.term,!0);else if(!e.state&&t){let e=document.querySelector(".main-inner");for(;e.firstChild;)e.removeChild(e.firstChild);for(let n of t)e.appendChild(n);t=null}},!1);function r(t,i){a.value=t,s.setAttribute("data-running","true"),o?l(t,i):e?(e=t,n=i):(e=t,n=i,u())}function c(){s.removeAttribute("data-running");const t=document.querySelector(".header");t&&t.classList.contains("fade")&&a.blur(),e=null,n=!1}function u(){let t=new XMLHttpRequest;t.open("GET","search.json"),t.responseType="json",t.addEventListener("load",function(){let s=t.response;if(!s){console.error("Search index could not be downloaded, was it generated?"),c();return}i={},o=lunr(function(){const e="en";e!="en"&&lunr.hasOwnProperty(e)&&this.use(lunr[e]),this.ref("uri"),this.field("title"),this.field("subtitle"),this.field("content"),this.field("description"),this.field("categories"),this.field("tags");for(let e of s)this.add(e),i[e.uri]=e}),l(e,n)},!1),t.addEventListener("error",c,!1),t.send(null)}function l(e,n){try{let r=o.search(e),a=document.querySelector(".main-inner")||document.querySelector("main.home"),l=[];for(;a.firstChild;)l.push(a.firstChild),a.removeChild(a.firstChild);t||(t=l);let s=document.createElement("h1");s.id="search-results",s.className="list-title",r.length==0?s.textContent="No results found for “{}”".replace("{}",e):r.length==1?s.textContent="Found one result for “{}”".replace("{}",e):s.textContent="Found 13579 results for “{}”".replace("{}",e).replace("13579",r.length),a.appendChild(s),document.title=s.textContent;let u=document.getElementById("search-result");for(let n of r){let t=i[n.ref],e=u.content.cloneNode(!0);e.querySelector(".summary-title-link").href=e.querySelector(".read-more-link").href=t.uri,e.querySelector(".summary-title-link").textContent=t.title,e.querySelector(".summary").textContent=d(t.content,70),a.appendChild(e)}s.scrollIntoView(!0),n||history.pushState({type:"search",term:e},s.textContent,"#search="+encodeURIComponent(e));let c=document.querySelector(".nav-toggle");c&&c.classList.contains("open")&&document.getElementById(c.getAttribute("for")).click()}finally{c()}}function d(s,o){let e,t="",n=0,i=/(\S+)(\s*)/g;for(;e=i.exec(s);)if(n++,n<=o)t+=e[0];else{let n=e[1][e[1].length-1],s=e[2][0];if(/[.?!"]/.test(n)||s=="\n"){t+=e[1];break}t+=e[0]}return t}},{once:!0})